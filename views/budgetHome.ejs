<html>


<head>

  <% include ./partials/mattHead.ejs %>
  <!-- Our Custom CSS -->
    <link rel ="stylesheet" href = "/budget.css"></link>

</head>

<body>
  <h1>MJG Budget</h1>

  <!--
  todo:
  *make it so that I can dynamically change what fields are in here:
  *set up infrastructure to remind me to fill out budget column
  -->

  <form method = "post" action = "/budget/newBudgetItem">
    <input name = "itemName" placeholder="new budget item"></input>
    <button>Submit</button>
  </form>

  <!--This form will be put into each and every one of the td-->

  <table>
    <tr>
      <th>Item</th>
      <th>Budget</th>
      <th>Actual</th>
    </tr>

    <%var items = items;
      var budgeted = budgeted;%>

      <%for(var m = 0; m < items.length; m++){%>
        <tr>
          <form method = "post" action = "/budget/newBudgetItemEntry">
            <td>
              <%=items[m].itemName%>
              <input hidden value = "<%=items[m].itemName%>" name = "item" placeholder="item"></input>
            </td>
            <td>
              <!--how to fix when you have budgeted nothing?-->
              <%if(budgeted.length == 0){%>
                <input name = "budgeted" placeholder="put budgeted amount" value = ""></input>
              <%}%>
              <%for(var g = 0; g < budgeted.length; g++){

                if(items[m].itemName == budgeted[g].item){%>
                  <input name = "budgeted" value = "<%=budgeted[m].budgeted%>"></input>
                  <!--this catch all below V cannot realize if a match has already been made-->
                <%}if(g == budgeted.length - 1){%>
                  <input name = "budgeted" placeholder="put budgeted amount" value = ""></input>
                <%}%>
              <%}%>

            </td>
            <td>
              <%if(budgeted.length == 0){%>
                <input name = "actualed" placeholder="put actual amount" value = ""></input>
              <%}%>
              <%for(var g = 0; g < budgeted.length; g++){
                if(items[m].itemName == budgeted[g].item){
                  if(budgeted[g].actualed){%>
                    <input name = "actualed" value = "<%=budgeted[m].actualed%>"></input>
                  <%}%>

                <%}if(g == budgeted.length - 1){%>
                  <input name = "actualed" placeholder="put actual amount" value = ""></input>
                <%}%>
              <%}%>

              <button>SET</button>
            </td>

          </form>
        </tr>

      <%}%>



  </table>

</body>

</html>
